---
import type { Rating, WithEmptyStringOption } from '../types/api';

export interface Props {
	rating: WithEmptyStringOption<Rating>
}

const {rating} = Astro.props;
const ratingAsNumber = Number(rating);

let screenreaderDescription = `${rating} stars`;
if (rating === '') {
	screenreaderDescription = 'Unrated';
} else if (rating === '1') {
	screenreaderDescription = '1 star';
}

const five = new Array(5).fill('');
---

<>
	<span class="visually-hidden">{screenreaderDescription}</span>
	<span aria-hidden="true">
		{five.map((_, index) => (
			<span class:list={[{star: true, active: index + 1 <= ratingAsNumber}]}>
				â˜…
			</span>
		))}
	</span>
</>

<style lang="scss">
	@use 'open-props-scss' as op;

	.star {
		color: op.$stone-5;

		@media print {
			color: op.$stone-0;
		}

		&.active {
			color: var(--ink);
		}
	}
</style>