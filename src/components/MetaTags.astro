---
import { v2 as cloudinary } from 'cloudinary';
cloudinary.config({cloud_name: 'bendmyers'});

export interface Props {
	title: string;
	description?: string;
};

const {url} = Astro;
const {title, description} = Astro.props;
const themeColor = '#00c7b7';

const shortTitle = title.split('|')[0].trim();

const ogImage = cloudinary.url(
	'bg_bggenerator_com_kub8ua',
	{
		transformation: [
			{
				effect: 'brightness:-25',
			},
			{
				color: '#ffffff',
				overlay: {
					font_family: 'Lato',
					font_size: 210,
					font_weight: '900',
					text: shortTitle
				},
				width: 1780,
				height: 1200,
				crop: 'fit',
			},
			{
				gravity: 'west',
				x: 90,
				y: -40,
				effect: 'shadow:20',
				color: '#00897e',
				flags: 'layer_apply'
			},
			{
				color: '#ffffff',
				overlay: {
					font_family: 'Sacramento',
					font_size: 130,
					text: 'infusion'
				},
				width: 1200,
				height: 1200,
				crop: 'fit',
				gravity: 'south_west',
				x: 120,
				y: 60
			}
		]
	},
);
---

<!-- Primary Meta Tags -->
<meta name="title" content={title} />
{description && <meta name="description" content={description} />}

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website" />
<meta property="og:site_name" content="Infusion" />
<meta property="og:url" content={url} />
<meta property="og:title" content={title} />
<meta property="og:image" content={ogImage} />
{description && <meta property="og:description" content={description} />}

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image" />
<meta property="twitter:url" content={url} />
<meta property="twitter:title" content={title} />
{description && <meta property="twitter:description" content={description} />}
<meta property="twitter:image" content={ogImage} />

<!-- Generic meta tags -->
<meta name="theme-color" content={themeColor} />
<meta name="generator" content={Astro.generator} />